<!doctype html>
<html lang='en-GB'>
<head>
    <meta charset='utf-8'>
    <title>Pie-Chart Page</title>
    <script src="scripts/ractive.js"></script>
    <script src="scripts/livescript.js"></script>
    <script src="scripts/prelude-browser-min.js"></script>
    <script type="text/ls" src="pie-chart.ls"></script>
    <script src="scripts/jquery-1.12.0.min.js"></script>
    <script src="scripts/jQuery.Soap.js"></script>
</head>
<body style="margin:0px;">
    <h1>Pie-Chart</h1>
    <div id='main-output'></div>
    <script id='main-template' type='text/ractive'>
        <piechart names="Domates,Patates,SoÄŸan,Mantar" values="{{myData}}" scores="{{x}}"/>
    </script>
    <script id='pie-chart' type='text/ractive'>
        <svg viewBox='0 0 100 180'>
        {{#each getSegments( values ) :i}}
            <g transform='translate(50,50)'>
              <polygon fill='{{ colors[i] }}'
                on-mouseover='set("selected", i)' on-mouseout='set("selected", null)'
                opacity='{{ selected === null ? 1 : (selected === i ? 1 : 0.2) }}' points='{{ getSegmentPoints( ., 20, 50 ) }}'>
            </g>
            <g transform='translate(5,110)' on-mouseover='set("selected", i)' on-mouseout='set("selected", null)'
                opacity='{{ selected === null ? 1 : (selected === i ? 1 : 0.2) }}'>
                <rect transform='translate(0,{{i*10}})' width="5" height="5" style="fill:{{ colors[i] }};stroke-width:0.5;stroke:rgb(0,0,0)" />
                <text transform='translate(10,{{i*10+5}})'  font-size="7">{{columnList[i]}}</text>
            </g>
            <g transform='translate(46,57)'>
                {{#if selected === i}}
                    <text text-anchor="middle" font-size="20">{{ .["value"] }}</text>
                {{/if}}
            </g>
        {{/each segments}}
        </svg>

    </script>
    <style>
        .box {
            position: relative;
            width: 15%;
            float: left;
            margin: 0 0 1em 0;
        }
        .box:after {
            display: block;
            content: '';
            padding-bottom: 80%;
        }
    </style>
    <script>
        require("LiveScript").go()
    </script>
</body>
</html>
